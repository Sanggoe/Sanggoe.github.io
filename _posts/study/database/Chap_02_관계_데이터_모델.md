# Chap 02. 관계 데이터 모델

## **01** **관계 데이터 모델의 개념** **(Relational data model)**

<br/>

* **릴레이션** **(Relation) :** **행과 열로 구성된 테이블** **★**

| 용어                  | 한글 용어             | 비고                 |
| --------------------- | --------------------- | -------------------- |
| relation              | 릴레이션, 테이블 (표) | “관계”라고 하지 않음 |
| relational data model | 관계 데이터 모델      |                      |
| relational database   | 관계 데이터베이스     |                      |
| relational algebra    | 관계대수              |                      |
| relationship          | 관계                  |                      |

<br/>

<br/>

### 릴레이션이란?

<br/>![tmp9AD](./imgs/tmp9AD.jpg)  

<br/>

### 관계(relationship)

* 릴레이션 내에서 생성되는 관계 : 릴레이션 내 데이터들의 관계
* (그냥.. 릴레이션 안에는 각 항목들이 있다는 걸 말한다.)
* 릴레이션 간에 생성되는 관계 : 릴레이션 간의 관계

  ![tmp9FD](./imgs/tmp9FD.jpg)  

**도서 릴레이션**과 **고객 릴레이션** 간에는 **주문** 이라는

**관계**(**relationship**)이 성립(존재) 한다.

<br/>

**Relation****과** **Relationship****의 차이**에 대해 설명하고 있는 것!

<br/>

<br/>

**릴레이션 스키마와 인스턴스**

  <br/>![tmpA0D](./imgs/tmpA0D.jpg)  

\* **릴레이션 스키마**(schema = type = templet = class개념)  (내포)-아래에서 설명

  테이블에서 파란색 부분을 말한다. DDL(Data Definition Language)로 정의함.

  보통은 잘 바뀌지 않아 스키마는 정적인 부분. 

<br/>

 **<****스키마의 요소****>**

**속성**(**attribute**) : 스키마의 항목. **열**(**Column**)이라고도 부름

**도메인**(**domain**) : 속성이 가질 수 있는 값의 집합 (자료형. **data type**이라고 생각하자)

**차수**(**degree**) : 속성의 개수

<br/>

 **<****스키마의 표현****>**

\- 릴레이션 이름(속성1 : 도메인1, 속성2 : 도메인2, 속성3 : 도메인3 …)

  EX) 도서(도서번호, 도서이름, 출판사, 가격)

<br/>

***** **릴레이션 인스턴스**(instance = object = example개념)  (외연)-아래에서 설명

  각각의 한 행들이 [도서번호, 도서이름, 출판사, 가격] 이라는 스키마에 대한 예제이다.

  따라서 들어가는 값, value를 말한다. DML(Data Manipulation Language)로 다룬다.

<br/>

 **<****인스턴스의 요소****>**

**튜플**(**tuple**) : 릴레이션의 **행**(**row**)

 → 튜플이 가지는 속성의 개수는 릴레이션 schema의 degree와 동일하고, 릴레이션 내의 

​    모든 튜플들은 서로 중복되지 않아야 한다.

**카디널리티**(**Cardinality**) : 튜플의 개수

<br/>![tmpA2D](./imgs/tmpA2D.jpg)  

<br/>

\* **릴레이션**에서는 **속성**, **튜플**이라는 용어를 쓰고,

 실제 **구현하는 단계**에서는 **table**, **column**, **row** 용어를 사용한다.

<br/>

내포(intension, 스키마) : 알고 보면 이런 자료들을 가지고 있다는, 보이지 않는 부분

외연(extension, 인스턴스): 직접 데이터를 사용하는 사람들한테 외적으로 보이는 부분

<br/>

**릴레이션의 특징**

**-** **속성은 서로 다른 이름을 가진다****.** 속성은 한 릴레이션에서 서로 다른 이름을 가져야만 함.

\- **속성의 순서는 상관없다****.** 속성의 순서가 달라도 릴레이션 스키마는 같음. 예를 들어, 릴레이션 스키마에서 (이름, 주소)로 속성을 표시하거나 (주소, 이름)로 표시하여도 상관없음.

\- **한 속성의 값은 모두 같은 도메인 값을 가진다****.** 한 속성에 속한 열은 모두 그 속성에서 정의한 도메인 값만 가질 수 있음.

\- **속성은 단일 값을 가진다****.** 각 속성의 값은 도메인에 정의된 값만을 가지며 그 값은 모두 단일 값이여야 함. **Single value.** **원자값이다****.** **쪼개지지 않는다****.**

<br/>

\- **릴레이션 내의 중복된 튜플은 허용하지 않는다****.** 하나의 릴레이션 인스턴스 내에서는 서로 중복된 값을 가질 수 없음. 즉 모든 튜플은 서로 값이 달라야 함. **유일성****!!**

\- **튜플의 순서는 상관없다****.** 튜플의 순서가 달라도 같은 릴레이션임. 관계 데이터 모델의 튜플은 실제적인 값을 가지고 있으며 이 값은 시간이 지남에 따라 데이터의 삭제, 수정, 삽입에 따라 순서가 바뀔 수 있음.

<br/>

<br/>

![tmpA5D](./imgs/tmpA5D.jpg)  

<br/>

\* **릴레이션은 속성의 집합으로도 볼 수 있고****,** **튜플의 집합으로도 볼 수 있다****.** 스키마 관점에서는 속성의 집합이요, 인스턴스 관점에서는 튜플의 집합인 것이외다.

<br/>

**관계 데이터 모델** **(Relational Data Model)**

\* **모든 데이터 모델은****,** **구조****(Structure),** **연산****(Operation),** **제약조건****(Constraint)**을 **포함해야 함**

앞선 내용을 예를 들어 설명하면 도서 정보를 담은 도서 릴레이션, 고객 정보를 담은 고객 릴레이션, 주문 내역을 담은 주문 릴레이션. 여기서 **구조는 릴레이션**이다. **제약조건은** 각 **릴레이션에 저장된 데이터 값이 가져야 하는 제약**(나이는 양수, 주문 릴레이션의 고객번호는 고객 릴레이션에서만 참조 등)을 말한다. **관계 연산**은 릴레이션을 다루는 **연산 규칙**(**삽입****,** **삭제****,** **갱신 등**)을 의미한다.

<br/>

\- 관계 데이터 모델의 경우, 실세계의 데이터를 **2****차원 테이블 형태인 릴레이션**으로 표현한다. 릴레이션에 대한 **제약조건****(constraints)**과 **관계 연산**을 위한 **관계대수**(**relational algebra**)를 정의한다. 다시 정리하면 . . . 

<br/>

\- 구조 : 테이블 형태인 릴레이션

연산 : 삽입, 삭제, 갱신이라는 연산을 DML로 하는데, 관계대수라는 이론을 따른다.

제약조건 : SQL로 선언

<br/>

![tmpA8D](./imgs/tmpA8D.jpg)  

<br/>

\* 관계 데이터 모델을 따라서 관계 DB를 만들고, 그 모델에 따라서 DBMS를 구입하면 관계 DBS가 생기는 것.

<br/>

**02** **무결성****(integrity = correctness)** **제약조건****(constraint)**

**키****(key)**

\- **특정 튜플을 식별할 때 사용하는 속성의 집합**을 말한다. (하나일 수도, 여럿일 수도 있다.)

\- 릴레이션은 중복된 튜플을 허용하지 않기 때문에, 각 튜플에 포함된 속성들 중 어느 하나(혹은 하나 이상)는 값이 달라야 한다. 즉, **키가 되는 속성의 집합은 반드시 값이 달라서 튜플들을 서로 구별할 수 있어야 한다****.** (**유일성**)

**키는 릴레이션 간의 관계를 맺는데도 사용된다**. ★

<br/>

***** **슈퍼키****(super key)**

**튜플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합**

  튜플을 유일하게 식별할 수 있는 값이면 모두 슈퍼키가 될 수 있음

  따라서 유일성

<br/>

**예****)** **고객 릴레이션의 경우**

1) **고객번호** : 고객별로 유일한 값이 부여되어 있기 때문에 **튜플을 식별할 수 있음**.

2) **이름** : 동명이인이 있을 경우 튜플을 유일하게 식별할 수 없음. (딱 **중복되지 않는 데이터를 가지고서만 데이터를 모델링한다면****, Key****값으로 사용****‘****할 수는****’** **있음****.** 권장은 않습니다.)

3) **주민번호** : 개인별로 유일한 값이 부여되어 있기 때문에 **튜플을 식별할 수 있음****.**

4) **주소** : 가족끼리는 같은 정보를 사용하므로 튜플을 식별할 수 없음.

5) **핸드폰** : 한 사람이 여러 개의 핸드폰을 사용할 수 있고 반대로 핸드폰을 사용하지 않는 사람이 있을 수 있기 때문에 튜플을 식별할 수 없음.

<br/>

**고객 릴레이션은 고객번호와 주민번호를 포함한 모든 속성의 집합이 슈퍼키가 됨**

 유일하게 식별하는 하나의 속성에 다른 속성들을 더해도 하나의 슈퍼키로 사용할 수 있음! 엄청 많은 집합이 슈퍼키가 될 수 있어서 큰 의미가 없다.

<br/>

***** **후보키** **(candidate key)**

**튜플을 유일하게 식별할 수 있는 속성의 최소 집합**

  **유일성****(uniqueness),** **최소성****(minimality)**

**-** 슈퍼키의 최소 부분집합이므로, 후보키가 안되면 슈퍼키도 될 수 없다.

<br/>

**예****)** **주문 릴레이션의 경우**

1) 고객번호 : 한 명의 여러 권의 도서 구입 가능. 후보키가 될 수 없음. 고객번호가 1인 박지성 고객은 세 번의 주문 기록이 있으므로 튜플을 유일하게 식별할 수 없음.

2) 도서번호 : 도서 번호가 2인 ‘축구아는 여자’는 두 번의 주문 기록이 있으므로 튜플을 유일하게 식별할 수 없음

<br/>

주문 릴레이션의 후보키는 2개의 속성을 합한 (고객번호, 도서번호)가 됨. 이렇게 2개 이상의 속성으로 이루어진 키를 **복합키**(**composite key**)라고 함. 이 **후보키**에 더덕더덕.. 더덕무침 먹고싶다.. 붙이면 슈퍼키가 된다.

<br/>

***** **기본키** **(primary key)**

**여러 후보키 중 하나**를 선정하여 대표로 삼는 키

후보키가 하나 뿐이라면 그 후보키를 기본키로 사용하면 되고 여러 개라면 릴레이션의 특성을 반영하여 **하나를 선택**하면 됨. (**DB** **설계자가 결정**)

<br/>

 **<** **기본키 선정 시 고려사항** **>**

릴레이션 내 튜플을 식별할 수 있는 **고유한 값**을 가져야 함 (**유일성** **uniqueness**) ★

**NULL** **값은 허용하지 않음**. (**개체 무결성** **integrity**) ★

키 값의 변동이 일어나지 않아야 함 (권장)

**최대한 적은 수의 속성**을 가진 것이라야 함. (**최소성** **minimality**) ★

향후 키를 사용하는데 있어서 문제 발생 소지가 없어야 함. 향후에 중복 생기면 안되니까.

  ![tmpAAD](./imgs/tmpAAD.jpg)  

 **<** **릴레이션 스키마 표현 시****,** **기본키는 밑줄로 표시** **>**

릴레이션 이름 (속성1, 속성2, ... 속성 N)

ex) 고객 (**고객번호**, 이름, 주민번호, 주소, 핸드폰)

​      도서 (**도서번호**, 도서이름, 출판사, 가격)

​     **PK**

<br/>

***** **대체키****(alternate key)**

기본키로 선정되지 않은 후보키를 말함.

고객 릴레이션의 경우, 고객번호/주민번호 중 전자를 기본키로 정하면 후자가 대체키!

<br/>

***** **대리키** **(surrogate key) ==** **인조키** **(artificial key)**

기본키가 보안을 필요로 하거나, 여러 개의 속성으로 구성되어 복잡하거나, 마땅한 기본키가 없을 때는 일련번호 같은 가상의 속성을 만들어 기본키로 삼는 경우가 있다. 이를 대리키(surrogate key) 혹인 인조키(artificial key)라고 한다.

대리키는 DBMS나 관련 소프트웨어에서 임의로 생성하는 값으로 사용자가 직관적으로 그 값의 의미를 알 수 없음.

<br/>

***** **외래키** **(foreign key)** **★** **항상 시험에 나온대 ㅋㅋ**

다른 릴레이션 또는 자신 릴레이션의 기본키를 참조하는 속성을 말함. 다른 릴레이션의 기본키를 참조하여 관계 데이터 모델의 특징인 **릴레이션 간의 관계****(relationship)****를 표현**.

<br/>

 **<** **외래키의 특징** **>**

**관계 데이터 모델**의 **릴레이션 간의 관계를 표현**함.

다른 릴레이션의 **기본키**를 참조하는 속성임.

**참조하고**(**외래키**) **참조되는**(**기본키**) 양쪽 릴레이션의 **도메인**(type)은 서로 같아야 함.

  (**FK**가 **PK****를 참조**하는 것. 주격을 잘 구분하자. 도메인은.. **타입이 호환되어야** 한다는 말.)

**참조되는**(**기본키**) **값이 변경**되면 **참조하는**(**외래키**) **값도 변경**됨. **★**

**NULL** **값**과 **중복 값** 등이 **허용**됨.

**자기 자신의 기본키를 참조하는 외래키도 가능**함. => < 아래서 다시 설명 >

외래키가 기본키의 일부가 될 수 있음. => 아래 상황에서, 기존 **PK**인 **주문번호**가 **없을 경우 고객번호** **+** **도서번호**를 **주문의 기본키로** 사용할 수 있다.

<br/>

**예****)** **고객 릴레이션과 도서 릴레이션 간의 주문 관계**

<br/>

![tmpACE](./imgs/tmpACE.jpg)  

\- **FK**는 다른 릴레이션의 **PK**랑 **참조 관계로 연결**되어있는 것이다. 고객과 주문을, 도서와 주문을 연결해주는 **연결 고리**인 것이다.

\- Relational-data-model을 따르는 Relational DB에는, DB 안에 있는 모든 데이터가 Relation형태이다. 관계도 실제 의미는 다르지만, 표현은 마찬가지로 Relation으로 한다.

<br/>

 **<** 외래키 사용 시 참조하는 릴레이션과 참조되는 릴레이션이 꼭 다른 릴레이션일 필요는 없음. 즉 **자기 자신의 기본키를 참조할 수도 있음**. **>**

  ![tmpB0D](./imgs/tmpB0D.jpg)  

ex) 국민 (**주민번호****[PK]**, 이름, 주소, **배우자****[FK]**) : 배우자[FK]는 주민번호[PK]를 참조하는 중.

ex) 사원 (**사원번호****[PK]**, 이름, 연봉, **BOSS[FK]**) : BOSS[FK]는 사원번호[PK]를 참조하고 있음.

이때, FK와 PK는 같은 도메인을 사용할 것이다.

<br/>

  ![tmpB1E](./imgs/tmpB1E.jpg)  

<br/>

**무결성 제약조건** **(integrity constraint)** **★**

<br/>

***** **데이터 무결성** **(integrity = correctness)**

**-** **데이터베이스에 저장된 데이터의 일관성과 정확성을 지키는 것을 말함****. (DBMS****가 해줌****!)**

<br/>

***** **도메인 무결성 제약조건**

\- 도메인 제약(**domain constraint**)이라고도 하며, **릴레이션 내의 튜플들이 각 속성의 도메인에 지정된 값만을 가져야 한다는 조건**임. SQL문에서 **데이터 형식****(type)**, **널****(null/not null)**, 기본 값(default), 체크(check) 등을 사용하여 지정할 수 있음.

<br/>

***** **개체 무결성 제약조건** **(entity integrity constraint)**

**기본키 제약****(primary key constraint)**이라고도 함. 릴레이션은 기본키를 지정하고 그에 따른 무결성 원칙 즉, **기본키는** **NULL** **값을 가져서는 안되며**, **릴레이션 내에 오직 하나의 값만 존재해야 한다는 조건**임.

<br/>

1) **삽입** **/** **수정** : **기본키**가 같거나 **NULL**이면 삽입, 수정이 **금지**됨

2) 삭제 : 특별한 확인 필요 없이 **즉시 수행**됨

![tmpB2E](./imgs/tmpB2E.jpg)  

<br/>

***** **참조 무결성 제약조건** **(referential integrity constraint)**

**외래키 제약****(foreign key constraint)**이라고도 하며, **릴레이션 간의 참조 관계를 선언하는 제약조건**임. **자식****(****참조하는****)** **릴레이션의 외래키는 부모****(****참조되는****)** **릴레이션의 기본키와 도메인이 동일해야** 하며, 자식 릴레이션의 값이 변경될 때 부모 릴레이션의 제약을 받는다는 것임.

<br/>

1) **삽입**

 \- 학과(부모 릴레이션) : 튜플 삽입 후 수행하면 정상적으로 진행된다.

 \- 학생(자식 릴레이션) : **참조 받되 테이블에 외래키 값이 없으므로 삽입이 금지**된다.

 정리하면, **자식 릴레이션에 튜플을 하나 삽입**할 때, 삽입할 자식 릴레이션의 **외래키 값**이 **부모 릴레이션의 참조되는 기본키 값 중 하나**여야 한다. 그렇지 않을 경우, 삽입이 금지됨

<br/>

2) **삭제**

\- 학과(부모 릴레이션) : 참조하는 테이블을 **같이 삭제** or **금지** o 다른 추가 작업이 필요함.

\- 학생(자식 릴레이션) : 바로 삭제 가능함. 

<br/>

 **<** **부모 릴레이션에서 튜플을 삭제할 경우 참조 무결성 조건을 수행하기 위한 고려사항** **>**

  **즉시 작업을 중지**

  **자식 릴레이션의 관련 튜플을 삭제**

  초기에 설정된 다른 어떤 값(Default)으로 변경

  NULL 값으로 설정

<br/>

3) **수정**

\- 삭제와 삽입 명령이 연속해서 수행됨.

\- 부모 릴레이션의 수정이 일어날 경우 삭제 옵션에 따라 처리된 후 문제가 없으면 다시 삽입 제약조건에 따라 처리됨.

  ![tmpB3F](./imgs/tmpB3F.jpg)  

<br/>

<br/>

![tmpB50](./imgs/tmpB50.jpg)  

<br/>

<br/>![tmpB70](./imgs/tmpB70.jpg)  

<br/>

***\**** **위 각 제약조건들에 대해서****,** **상황들을 여러 가지 생각해보며 분석 정리해보자****!!! \**\***

<br/>

**무결성 제약조건의 수행**

? 

<br/>

<br/>

**03** **관계대수**

**관계대수** **(relational algebra)**

릴레이션에서 원하는 결과를 얻기 위해 수학의 대수와 같은 연산을 이용하여 질의(**query**)하는 방법을 기술하는 언어

<br/>

***** **관계대수와 관계해석**

**관계대수** : 어떤 데이터를 어떻게 찾는지에 대한 처리 절차를 명시하는 **절차적인 언어**이며, DBMS 내부의 처리 언어로 사용됨

**관계해석** : 어떤 데이터를 찾는지만 명시하는 **선언적인 언어**로 **관계대수와 함께 관계** **DBMS****의 표준 언어**인 **SQL****의 이론적인 기반을 제공**함

<br/>

**→** **관계대수와 관계해석은 모두 관계 데이터 모델의 중요한 언어이며 실제 동일한 표현 능력을 가지고 있음****.**

<br/>

***** **관계의 수학적 의미**

릴레이션(relation)의 수학적 개념

  예) A = {2, 4}, B = {1, 3, 5} 일 때

​    AxB = {(2,1), (2,3), (2,5), (4,1), (4,3), (4,5)}

<br/>

​    릴레이션 R은 속성의 도메인들의 **카티전 프로덕트****(****곱 연산****)**의 **부분집합**으로 정의

​    예) R(1)={(2,1), (4,1)}, R(2)={(2,1), (2,3), (2,5)}, R(3)={(2,3), (2,5), (4,3), (4,5)}

<br/>

​    원소 개수가 n인 집합 S의 부분 집합의 개수는 **2****ⁿ**이므로, 카티전 프로덕트 **A×B****의**

​    **부분집합의 개수는** **2****|A|x|B|** 임. 

<br/>

​    카티전 프로덕트의 기초 집합 A, B 각각이 가질 수 있는 값의 범위를 도메인(domain)

​    이라고 함. 즉 집합 A의 도메인은 {2, 4}임.

<br/>

​    릴레이션 역시 집합이므로 집합에서 집합에서 가능한 연산은 합집합(∪), 교집합(∩),

​    카티전 프로덕트(×) 등이 있음.

​    R(1) ∪ R(2) = {(2, 1), (4, 1), (2, 3), (2, 5)}

​    R(1) ∩ R(2) = {(2, 1)}

<br/>

<br/>

***** **릴레이션****(relation)****의 현실 세계 적용**

  예) 학번={2, 4}, 과목={데이터베이스, 자료구조, 프로그래밍}일 때

​    두 집합의 카티전 프로덕트 학번×과목은 학번 원소와 과목 원소의 순서쌍의 집합임.

​    즉, 학번×과목={(2, 데이터베이스), (2, 자료구조), (2, 프로그래밍), (4, 데이터베이스),

  ![tmpB90](./imgs/tmpB90.jpg)      (4, 자료구조), (4, 프로그래밍)}을 말함.

<br/>

<br/>

​    학번×과목의 각 원소는 학생이 과목을 수강할 수 있는 모든 경우를 나열한 것임.

​    수강={(2, 데이터베이스), (2, 자료구조), (4, 프로그래밍)}은 카티전 프로덕트 학번×과목

​    의 부분집합으로 **하나의 릴레이션 인스턴스임****(****상태****)** 수강 릴레이션의 튜플은 위에서

​    나열한 여섯 개 원소 중 하나로, 아래 수강 테이블을 데이터베이스에서는 릴레이션

​    (relation) 이라고 함.

<br/>

***** **관계대수 연산자**

<br/>

![tmpB91](./imgs/tmpB91.jpg)  

<br/>

<br/>

***** **관계대수식**

  ![tmpC0F](./imgs/tmpC0F.jpg)  관계대수는 **릴레이션 간 연산을 통해 결과 릴레이션을 찾는 절차를 기술한 언어**로, 이 연산을 수행하기 위한 식을 관계대수식(**relational algebra expression**)이라고 함. 관계대수식은 대상이 되는 릴레이션과 연산자로 구성되며, 결과는 릴레이션으로 반환됨. 반환된 릴레이션은 **릴레이션의 모든 특징**을 따름. 

<br/>

\- **단항 연산자** : 연산자<조건> 릴레이션

\- **이항 연산자** : 릴레이션1 연산자<조건> 릴레이션2

<br/>

<br/>

![tmpC20](./imgs/tmpC20.jpg)  

<br/>

<br/>

**셀렉션과 프로젝션**

<br/>

***** **셀렉션** **(Selection)** **★**

**릴레이션의 튜플을 추출하기 위한 연산**임. 하나의 릴레이션을 대상으로 하는 **단항 연산자**며, 찾고자 하는 튜플의 **조건****(predicate)****을 명시**하고 그 **조건에 만족 하는 튜플을 반환**함. 

**형식** : **σ****<****조건****>****(R)** (**R****은 릴레이션****,** **σ****는 그리스 문자**이며 대문자는 Σ / **조건** **: T/F** **논리식** )

<br/>

![tmpC5F](./imgs/tmpC5F.jpg)  

​    

***** **셀렉션****(selection)****의 확장**

**형식** : **σ****<****복합조건****>****(R)** (**R****은 릴레이션**, **σ****는 그리스 문자**이며 대문자는 Σ / **복합조건** **:** **논리식**)

여러 개의 조건을 **∧****(and),** **∨** **(or),** **┑****(not)** 기호를 이용하여 **복합조건**을 표시할 수 있다. 예를 들어, “가격이 8,000원 이하이고, 도서번호가 3 이상인 책을 찾아라”는 질의는 다음과 같이 표현한다.

**σ****(****가격****<=8000** **∧** **도서번호** **>=3)****(****도서****)**

<br/>

<br/>

 ***\**\**** **셀렉션과 프로젝션은 대응되는 개념이다****. \**\**\***

***** **σ** **시그마는 릴레이션의 튜플을 반환하는 수평 부분집합이다****. (horizontal subset)**

\* **π** **파이는 릴레이션의 속성을 반환하는 수직 부분집합이다****. (vertical subset)**

<br/>

<br/>

***** **프로젝션****(projection)** **★**

\- 릴레이션의 **속성을 추출**하기 위한 연산으로 **단항 연산자**임.

\- **형식** : **π****<****속성리스트****>****(R)**  (**R****은 릴레이션****,** **π** **는 그리스 문자**이며 대문자는 Π )

<br/>

![tmpC70](./imgs/tmpC70.jpg)  

<br/>

<br/>

**집합 연산**

<br/>

***** **합집합**

\- 두 개의 릴레이션을 **합하여 하나의 릴레이션을 반환**함. 이때 **두 개의 릴레이션은 서로 같은 속성 순서와 도메인을 가져야 함**.

\- **형식** **: R** **∪** **S** 

<br/>

![tmpCAF](./imgs/tmpCAF.jpg)  

<br/>

***** **교집합**

\- 합병가능한 두 릴레이션을 대상으로 하며, 둘이 공통으로 가지고 있는 튜플을 반환함.

\- **형식** **: R** **∩** **S**

<br/>

![tmpCC0](./imgs/tmpCC0.jpg)  

<br/>

<br/>

***** **차집합**

\- 첫 번째 릴레이션에는 속하고 두 번째 릴레이션에는 속하지 않는 튜플을 반환함.

\- **형식** **: R - S**

<br/>

![tmpCC1](./imgs/tmpCC1.jpg)  

<br/>

<br/>

***** **카티전 프로덕트** **(cartesian product)** **★**

두 릴레이션을 연결 시켜 하나로 합칠 때 사용함. 결과 릴레이션은 첫 번째 릴레이션의 오른쪽에 두 번째 릴레이션의 모든 튜플을 순서대로 배열하여 반환함. 결과 릴레이션의 **차수**는 **두 릴레이션의 차수의 합**이며, **카디날리티**는 **두 릴레이션의 카디날리티의 곱**임.

**형식** **: R × S**

<br/>

![tmpCD2](./imgs/tmpCD2.jpg)  

고객 릴레이션의 **degree : 4**, **cardinality : 3**

주문 릴레이션의 **degree : 5, cardinality : 4**

결과 릴레이션의 **degree : 4 + 5 = 9, cardinality : 3 x 4 = 12**

<br/>

<br/>

**조인** **★**

두 릴레이션의 공통 속성을 기준으로 속성 값이 같은 튜플을 수평으로 결합하는 연산임. 조인을 수행하기 위해서는 두 릴레이션의 조인에 참여하는 속성이 서로 동일한 도메인으로 구성되어야 함. 조인 연산의 결과는 공통 속성의 속성 값이 동일한 투플만을 반환함.

카티전 프로덕트를 수행한 후, 셀렉션 연산을 수행하는 것이 조인.

**형식** **: R****⋈****C****S =** **σ****c** **(R×S)**   (R과 S는 릴레이션, c 는 조인조건)

조인 연산의 구분

**기본연산** **:** **세타조인****(** **⋈****θ** **),** **동등조인****(** **⋈** **),** **자연조인****(** **⋈****N** **)** **자연조인을 제일 많이 씀**

확장된 조인 연산 : **세미조인****(** **⋉****,** **⋊** **),** **외부조인****(** **⟖****,** **⟕****,** **⟗** **)** 

<br/>

***** **세타조인****(theta join,** **θ****)**

\- 조인에 참여하는 두 릴레이션의 **속성 값을 비교하여 조건을 만족하는 튜플만 반환**함.

\- 세타조인의 **조건**은 **{=,** **≠****,** **≤****,** **≥****,** **＜****,** **＞****}** 중 하나가 됨.

\- **형식** **: R****⋈****(r** **조건** **s)****S** (**R****과** **S****는 릴레이션**이며 **r****은** **R****의 속성**, **s****는** **S****의 속성**)

<br/>

***** **동등조인****(equi join)**

\- 세타조인에서 **=** **연산자를 사용한 조인**을 말함. **보통 조인 연산이라 하면 동등조인**을 지칭

\- **형식** **: R****⋈****(r = s)****S**

<br/>

  ![DRW000041382c36](./imgs/DRW000041382c36.gif)  

<br/>

***** **자연조인** **(natural join)** **★**

\- 동등조인에서 **조인에 참여한 속성이 두 번 나오지 않도록 속성을 제거한 결과를 반환**함.

\- **형식** **: R****⋈****N(r, s)****S**

<br/>

  ![DRW000041382c38](./imgs/DRW000041382c38.gif)  

<br/>

<br/>

***** **외부조인****(outer join)**

\- 자연조인 시 조인에 **실패한 튜플**을 **모두 보여주되** **값이 없는 대응 속성에는** **NULL** **값**을 채워서 반환

  ![tmpD8E](./imgs/tmpD8E.jpg)  - 모든 속성을 보여주는 **기준 릴레이션 위치에 따라** **왼쪽****(left)** **외부조인****,** **오른쪽****(right)** **외부조인****,** **완전****(full)** **외부조인**으로 나뉨.

\- **형식** **:** **왼쪽****(left)** **외부조인** **–** **R****⟕****(r, s)****S**

​        **완전****(full)** **외부조인** **–** **R****⟗****(r, s)****S**

​     **오른쪽****(right)** **외부조인** **- R****⟖****(r, s)****S**

<br/>

<br/>

  ![DRW000041382c3a](./imgs/DRW000041382c3a.gif)  

<br/>

<br/>

***** **세미조인****(semi join)**

\- **자연조인을 한 후 두 릴레이션 중 한쪽 릴레이션의 결과만 반환**하며, 기호에서 **닫힌 쪽 릴레이션의 튜플만 반환**함.

\- **형식**  **: R****⋉****(r, s)****S**

<br/>

<br/>

![tmpDDD](./imgs/tmpDDD.jpg)  

<br/>

<br/>

**디비전**

\- 릴레이션의 속성 값의 집합으로 연산을 수행함.

\- **형식** **: R ÷ S**

  ![tmpDEE](./imgs/tmpDEE.jpg)  

<br/>

<br/>

**관계대수 예제**

<br/>

***** **셀렉션****,** **프로젝션****,** **집합연산의 복합 사용**

<br/>![tmpDFF](./imgs/tmpDFF.jpg)  

<br/>

![tmpE0F](./imgs/tmpE0F.jpg)  

<br/>

<br/>

***** **카티전 프로덕트를 사용한 연산과 조인을 사용한 연산**

<br/>![tmpE20](./imgs/tmpE20.jpg)  

  ![그림입니다.  원본 그림의 이름: CLP000030c8001e.bmp  원본 그림의 크기: 가로 922pixel, 세로 699pixel](file:///C:\Users\smpsm\AppData\Local\Temp\tmpE30.jpg)  

<br/>

<br/>

***** **카티전 프로덕트를 사용한 연산과 조인을 사용한 연산**

<br/>![그림입니다.  원본 그림의 이름: CLP000030c8001f.bmp  원본 그림의 크기: 가로 849pixel, 세로 231pixel](file:///C:\Users\smpsm\AppData\Local\Temp\tmpE60.jpg)  

<br/>

![tmpE71](./imgs/tmpE71.jpg)  

